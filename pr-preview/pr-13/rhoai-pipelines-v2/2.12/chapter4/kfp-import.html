<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Kubeflow Pipelines SDK :: RHOAI Data Science Pipelines</title>
    <link rel="prev" href="index.html">
    <link rel="next" href="../appendix/appendix.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">RHOAI Data Science Pipelines</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rhoai-pipelines-v2" data-version="2.12">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">RHOAI Data Science Pipelines</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../LABENV/index.html">Lab Environment</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../LABENV/minio-install.html">MinIO S3 Compatible Storage Setup</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../chapter1/dsp-intro.html">Introduction to ML Pipelines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter1/dsp-concepts.html">Data Science Pipeline Concepts</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../chapter2/index.html">Managing Data Science Pipelines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter2/data-science-pipeline-app.html">Data Science Pipeline Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter2/rhoai-resources.html">OpenShift AI Resources</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../chapter3/index.html">Creating Pipelines with Elyra</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter3/elyra-pipelines.html">Elyra Pipelines</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">KFP SDK</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="kfp-import.html">Kubeflow Pipelines SDK</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendix/appendix.html">Appendix A</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">RHOAI Data Science Pipelines</span>
    <span class="version">2.12</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">RHOAI Data Science Pipelines</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">2.12</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">RHOAI Data Science Pipelines</a></li>
    <li><a href="index.html">KFP SDK</a></li>
    <li><a href="kfp-import.html">Kubeflow Pipelines SDK</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Kubeflow Pipelines SDK</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In the previous section, we created a two task pipeline by using the Elyra GUI pipeline editor. The kfp SDK provides a Python API for creating pipelines. The SDK is available as a Python package that you can install by using the <code>pip install kfp</code> command. With this package, you can use Python code to create a pipeline and then compile it to YAML format. Then we can import the YAML code into OpenShift AI.</p>
</div>
<div class="paragraph">
<p>This course does not delve into the details of how to use the SDK. Instead, it provides the files for you to view and upload.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lab_exercise_importing_a_data_science_pipeline"><a class="anchor" href="#_lab_exercise_importing_a_data_science_pipeline"></a>Lab Exercise: Importing a Data Science Pipeline</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites</h3>
<div class="ulist">
<ul>
<li>
<p>Continue to use the <code>fraud-detection</code> Data Science Project that you created in the previous section. We won&#8217;t need a workbench in this section, but you should have completed all lab exercises up through the Data Science Pipelines / OpenShift AI Resources section of the course in order for the environment to support pipeline creation.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/import_pipeline_yaml.gif" alt="import pipeline yaml" width="600">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the RHOAI side navigation menu, click `Data Science Pipelines</p>
</li>
<li>
<p>Select the import pipeline button</p>
</li>
<li>
<p>For the pipeline name use: <strong>fraud-detection-example</strong></p>
</li>
<li>
<p>Select link below to download the fraud-detection.yaml file to import.</p>
<div class="paragraph">
<p><a href="https://github.com/RedHatQuickCourses/rhoai-pipelines-v2/blob/main/downloads/fraud_detection.yaml" target="blank">Fraud Detection Pipeline Definition Yaml</a></p>
</div>
</li>
<li>
<p>Use the download arrow to save the file locally.</p>
<div class="imageblock">
<div class="content">
<img src="_images/download_pipeline_yaml.png" alt="download pipeline yaml" width="600">
</div>
</div>
</li>
<li>
<p>Move back in the pipeline import page, select the 'upload a file' Pipeline radial button.</p>
</li>
<li>
<p>Click on Upload</p>
</li>
<li>
<p>Browse to the folder where you downloaded the fraud-detection.yaml file, select the file, then open to import the pipeline definition.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Optionally, it is possible to import the pipeline from a url.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once the pipeline definition is imported, it can be viewed in the data science pipeline dashboard.</p>
</div>
<div class="paragraph">
<p>There are three tabs in DSP dashboard:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Graph - the DAG view of the pipeline defined</p>
</li>
<li>
<p>Summary - shows the pipeline spec and version IDs</p>
</li>
<li>
<p>Pipeline spec - is the import yaml file that defines the pipeline.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The pipeline is now available to be executed, but currently there have been no <strong>one-off or scheduled runs</strong> for this pipeline, it has only been defined in the system.</p>
</div>
</div>
<div class="sect2">
<h3 id="_experiments_and_runs"><a class="anchor" href="#_experiments_and_runs"></a>Experiments And Runs</h3>
<div class="paragraph">
<p>An experiment is a workspace where you can try different configurations of your pipelines. You can use experiments to organize pipeline runs into logical groups. Experiments can contain arbitrary runs, including recurring runs.</p>
</div>
<div class="paragraph">
<p>A run can be configured using the Data Science Pipeline UI or programmatically using the <em>KFP SDK</em>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/create_pipeline_run.gif" alt="create pipeline run" width="600">
</div>
</div>
<div class="paragraph">
<p>To create a <em>run</em> for the fraud-detection-example pipeline we just imported.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Locate the fraud-detection-example in the data science pipeline menu / dashboard.</p>
</li>
<li>
<p>Use the menu at the far right to:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>upload a new version of the pipeline</p>
</li>
<li>
<p>create a schedule run for sometime in the future</p>
</li>
<li>
<p>create a one-off run</p>
</li>
</ol>
</div>
</li>
<li>
<p>Select the option to create a new run.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To execute the run, we need to input some information:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run Type: Scheduled runs are executed from different dashboard - skip this step</p>
</li>
<li>
<p>Define the project and experiment name:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>The project name is immutable and cannot be changed at this time.</p>
</li>
<li>
<p>For the experiment, choose an existing experiment from the list or create a new one.  Select create a new experiment.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Run Details:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Specify a name for this run</p>
</li>
<li>
<p>Add a description</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>The final section describes the pipeline</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select the pipeline to Run from the drop down</p>
</li>
<li>
<p>Select the version of the pipeline if available.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Depending on Pipeline Definition, some parameters must be specified at runtime.</p>
</div>
<div class="paragraph">
<p>In this case there are two required parameters, which allow this pipeline to have different inputs.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The first parameter is a url location of the data file to be imported during the Run.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">{"url": "https://raw.githubusercontent.com/rh-aiservices-bu/fraud-detection/main/data/card_transdata.csv"}</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The second parameter is the number of epochs.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">{"epochs": 2}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This epoch&#8217;s number is an important hyperparameter for the algorithm. It specifies the number of epochs or complete passes of the entire training dataset passing through the training or learning process of the algorithm.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Select <em>Create</em> Run to start the run.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_view_the_running_pipeline_details"><a class="anchor" href="#_view_the_running_pipeline_details"></a>View the Running Pipeline Details</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="_images/running_pipeline.gif" alt="running pipeline" width="600">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select the Experiments and Runs menu.</p>
</li>
<li>
<p>In the <code>experiments and runs</code> menu, select the fraud-detection-example pipeline experiment</p>
<div class="ulist">
<ul>
<li>
<p>In the window that opens all runs under this experiment are shown, currently there is only a single run.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Selecting the <strong>fraud-detection-example run</strong> will open a run specific window showing the graph, details, and pipeline spec tabs which provide information about the run.</p>
<div class="ulist">
<ul>
<li>
<p>In the graph view, each task will indicate the progress: running, completed, or failed.</p>
<div class="ulist">
<ul>
<li>
<p>selecting a task, will display information about the task including:</p>
<div class="ulist">
<ul>
<li>
<p>input /output</p>
</li>
<li>
<p>Task details</p>
</li>
<li>
<p>Volumes</p>
</li>
<li>
<p>Logs</p>
</li>
</ul>
</div>
</li>
<li>
<p>Access to the the above tabs are limited until the pipeline run completes or fails.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Select the Executions menu.</p>
<div class="ulist">
<ul>
<li>
<p>This page displays each running task for all pipelines along with the task status.</p>
</li>
<li>
<p>No additional information is shown from this page, refer to graph page for a detailed status overview of each task.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Select the Artifact menu</p>
<div class="ulist">
<ul>
<li>
<p>This view displays any artifacts created by all pipeline runs</p>
<div class="ulist">
<ul>
<li>
<p>A Type of artifact is display such as Datasets and models.</p>
</li>
<li>
<p>A URI to the S3 storage location of the artifact.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Once the pipeline completes:</p>
<div class="ulist">
<ul>
<li>
<p>If metrics have been configuired they will be avialable from the Experiments and Runs menu.</p>
<div class="ulist">
<ul>
<li>
<p>In our example metrics are provided for Accuracy and Previous Model Accuracy.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/pipeline_metrics.gif" alt="pipeline metrics" width="600">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_steps"><a class="anchor" href="#_next_steps"></a>Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are additional pipeline examples listed in the Appendix section. If you have an pipeline example you would like to share, please submit an issue and let&#8217;s get it added.</p>
</div>
<div class="paragraph">
<p>Good luck in your pipeline adventures.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="index.html">KFP SDK</a></span>
  <span class="next"><a href="../appendix/appendix.html">Appendix A</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
