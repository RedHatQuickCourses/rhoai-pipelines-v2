<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OpenShift AI Resources :: RHOAI Data Science Pipelines</title>
    <link rel="prev" href="section2.html">
    <link rel="next" href="../appendix/appendix.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://www.redhat.com" target="_blank"><img src="../../../_/img/redhat-logo.png" height="40px" alt="Red Hat"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="../../..">RHOAI Data Science Pipelines</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://github.com/RedHatQuickCourses/REPLACEREPONAME/issues" target="_blank">Report Issues</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rhoai-pipelines-v2" data-version="2.11">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">RHOAI Data Science Pipelines</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../LABENV/index.html">Lab Environment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../chapter1/index.html">Introduction to ML Pipelines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter1/section1.html">introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter1/section2.html">Machine Learning Operations Automation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter1/section3.html">Data Science Pipeline Concepts</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../chapter2/index.html">Data Science Pipelines</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter2/section1.html">kubeflow</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter2/section2.html">Data Science Pipeline Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter2/section3.html">RHOAI Pipeline Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../chapter2/section4.html">Elyra Pipelines</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Chapter 3</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section1.html">notes - tbd</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="section2.html">MinIO S3 Compatible Storage Setup</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="section3.html">OpenShift AI Resources</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../appendix/appendix.html">Appendix A</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">RHOAI Data Science Pipelines</span>
    <span class="version">2.11</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">RHOAI Data Science Pipelines</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">2.11</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">RHOAI Data Science Pipelines</a></li>
    <li><a href="index.html">Chapter 3</a></li>
    <li><a href="section3.html">OpenShift AI Resources</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">OpenShift AI Resources</h1>
<div class="sect1">
<h2 id="_configure_the_openshift_ai_data_science_cluster"><a class="anchor" href="#_configure_the_openshift_ai_data_science_cluster"></a>Configure the OpenShift AI Data Science Cluster</h2>
<div class="sectionbody">
<div class="videoblock">
<div class="content">
<video src="_images/llm_dsc_v3.mp4" width="640" controls>
Your browser does not support the video tag.
</video>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_openshift_ai_data_science_cluster"><a class="anchor" href="#_create_openshift_ai_data_science_cluster"></a>Create OpenShift AI Data Science Cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With our secrets in place, the next step is to create an OpenShift AI <strong>Data Science Cluster</strong>.</p>
</div>
<div class="paragraph">
<p><em>A DataScienceCluster is the plan in the form of an YAML outline for Data Science Cluster API deployment.</em></p>
</div>
<div class="paragraph">
<p>Return to the OpenShift Navigation Menu, Select Installed Operators, and Click on the OpenShift AI Operator name to open the operator.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Select the Option to create a Data Science Cluster.</strong></p>
</li>
<li>
<p><strong>Select the radial button to switch to the YAML view.</strong></p>
</li>
<li>
<p>Find the section below in the YAML file, in the Kserve Section find the Serving/Certificate area; add the line: <strong>secretName:</strong> followed by the name of the secret name that we deployed in the istio-system project. In addition, change the type from SelfSigned to <strong>Provided</strong>. See below for the example.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">kserve:
devFlags: {}
managementState: Managed
serving:
    ingressGateway:
    certificate:
        secretName: cert-manager-ingress-cert
        type: Provided
    managementState: Managed
    name: knative-serving</code></pre>
</div>
</div>
<div class="imageblock unresolved">
<div class="content">
<img src="dsc_cert_example.png" alt="dsc cert example" width="640">
</div>
</div>
<div class="paragraph">
<p>Once you have made those changes to the YAML file, <strong>Click Create</strong> to Deploy the Data Science Cluster.</p>
</div>
<div class="imageblock unresolved">
<div class="content">
<img src="dsc_deploy_complete.png" alt="dsc deploy complete" width="640">
</div>
</div>
<div class="paragraph">
<p>Single Model Serve Platform will now be deployed to expose ingress connections with the same certificate as OpenShift Routes. Endpoints will be accessible using TLS without having to ignore error messages or create special configurations.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_openshift_ai_install_summary"><a class="anchor" href="#_openshift_ai_install_summary"></a>OpenShift AI install summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Congratulations, you have successfully completed the installation of OpenShift AI on an OpenShift Container Cluster. OpenShift AI is now running on a new Dashboard!</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We installed the required OpenShift AI Operators</p>
<div class="ulist">
<ul>
<li>
<p>Red Hat OpenShift Serverless</p>
</li>
<li>
<p>Red Hat OpenShift ServiceMesh</p>
</li>
<li>
<p>Red Hat Authorino (technical preview)</p>
</li>
<li>
<p>OpenShift AI Operator</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_a_data_science_project"><a class="anchor" href="#_create_a_data_science_project"></a>Create a Data Science Project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Navigate to &amp; select the Data Science Projects section.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select the create data science project button.</p>
</li>
<li>
<p>Enter a name for your project, such as <strong>ollama-model</strong>.</p>
</li>
<li>
<p>The resource name should be populated automatically.</p>
</li>
<li>
<p>Optionally add a description to the data science project.</p>
</li>
<li>
<p>Select Create.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The next step is to create a <strong>Data Connection</strong> in our Data Science Project.  Before we can create our Data Connection, we will setup MinIO as our S3 compatible storage for this Lab.</p>
</div>
<div class="paragraph">
<p>Continue to the next section to deploy and configure Minio.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_data_connection"><a class="anchor" href="#_create_data_connection"></a>Create Data Connection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Navigate to the Data Science Project section of the OpenShift AI Console /Dashboard. Select the Ollama-model project.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select the Data Connection menu, followed by create data connection</p>
</li>
<li>
<p>Provide the following values:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Name:  <strong>models</strong></p>
</li>
<li>
<p>Access Key: use the minio_root-user from YAML file</p>
</li>
<li>
<p>Secret Key: use the minio_root_password from the YAML File</p>
</li>
<li>
<p>Endpoint: use the Minio API URL from the Routes page in Openshift Dashboard</p>
</li>
<li>
<p>Region: This is required for AWS storage &amp; cannot be blank (no-region-minio)</p>
</li>
<li>
<p>Bucket: use the Minio Storage bucket name: <strong>models</strong></p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Repeat the same process for the Storage bucket, using <strong>storage</strong> for the name &amp; bucket.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_workbench"><a class="anchor" href="#_creating_a_workbench"></a>Creating a WorkBench</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Navigate to the Data Science Project section of the OpenShift AI Console /Dashboard. Select the Ollama-model project.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select the WorkBench button, then click create workbench</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Name:  <code>tbd</code></p>
</li>
<li>
<p>Notebook Image:  <code>Minimal Python</code></p>
</li>
<li>
<p>Leave the remaining options default.</p>
</li>
<li>
<p>Optionally, scroll to the bottom, check the <code>Use data connection box</code>.</p>
</li>
<li>
<p>Select <strong>storage</strong> from the dropdown to attach the storage bucket to the workbench.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Select the Create Workbench option.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Depending on the notebook image selected, it can take between 2-20 minutes for the container image to be fully deployed. The Open Link will be available when our container is fully deployed.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jupyter_notebooks"><a class="anchor" href="#_jupyter_notebooks"></a>Jupyter Notebooks</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_open_jupyterlab"><a class="anchor" href="#_open_jupyterlab"></a>Open JupyterLab</h2>
<div class="sectionbody">
<div class="paragraph">
<p>JupyterLab enables you to work with documents and activities such as Jupyter notebooks, text editors, terminals, and custom components in a flexible, integrated, and extensible manner. For a demonstration of JupyterLab and its features, <a href="https://jupyterlab.readthedocs.io/en/stable/getting_started/overview.html#what-will-happen-to-the-classic-notebook">you can view this video.</a></p>
</div>
<div class="paragraph">
<p>Return to the ollama-model workbench dashboard in the OpenShift AI console.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select the <strong>Open</strong> link to the right of the status section.</p>
<div class="imageblock unresolved">
<div class="content">
<img src="oai_open_jupyter.png" alt="oai open jupyter" width="640">
</div>
</div>
</li>
<li>
<p>When the new window opens, use the OpenShift admin user &amp; password to login to JupyterLab.</p>
</li>
<li>
<p>Click the <strong>Allow selected permissions</strong> button to complete login to the notebook.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the <strong>OPEN</strong> link for the notebook is grayed out, the notebook container is still starting. This process can take a few minutes &amp; up to 20+ minutes depending on the notebook image we opted to choose.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_inside_jupyterlab"><a class="anchor" href="#_inside_jupyterlab"></a>Inside JupyterLab</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This takes us to the JupyterLab screen where we can select multiple options / tools / to work to begin our data science experimentation.</p>
</div>
<div class="paragraph">
<p>Our first action is to clone a git repository that contains a collection of LLM projects including  the notebook we are going to use to interact with the LLM.</p>
</div>
<div class="paragraph">
<p>Clone the github repository to interact with the Ollama Framework from this location:
<a href="https://github.com/rh-aiservices-bu/llm-on-openshift.git" class="bare">https://github.com/rh-aiservices-bu/llm-on-openshift.git</a></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Copy the URL link above</p>
</li>
<li>
<p>Click on the Clone a Repo Icon above explorer section window.</p>
<div class="imageblock unresolved">
<div class="content">
<img src="clone_a_repo.png" alt="clone a repo" width="640">
</div>
</div>
</li>
<li>
<p>Paste the link into the <strong>clone a repo</strong> pop up,   make sure the <strong>included submodules are checked</strong>, then click the clone.</p>
</li>
<li>
<p>Navigate to the llm-on-openshift/examples/notebooks/langchain folder:</p>
</li>
<li>
<p>Then open the file: <em>Langchain-Ollama-Prompt-memory.ipynb</em></p>
<div class="imageblock unresolved">
<div class="content">
<img src="navigate_ollama_notebook.png" alt="navigate ollama notebook" width="640">
</div>
</div>
</li>
<li>
<p>Explore the notebook, and then continue.</p>
</li>
</ol>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="section2.html">MinIO S3 Compatible Storage Setup</a></span>
  <span class="next"><a href="../appendix/appendix.html">Appendix A</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <img src="../../../_/img/rhl-logo-red.png" height="40px" alt="Red Hat"  href="https://redhat.com" >
</footer><script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
